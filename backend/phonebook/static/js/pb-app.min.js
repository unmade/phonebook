angular.module("pbApp",["ngRoute","ngResource","ngMaterial","infinite-scroll","pbApp.routes","pbApp.employees","pbApp.companies"]),angular.module("pbApp.routes",[]);

angular.module("pbApp.routes").config(["$routeProvider",function(e){e.when("/employees",{templateUrl:"/static/partials/employees/employees-list.html",controller:"EmployeesListCtrl",controllerAs:"ctrl"}).otherwise({redirectTo:"/employees"})}]);
angular.module("pbApp.employees",["pbApp.employees.controllers","pbApp.employees.services","pbApp.employees.directives"]),angular.module("pbApp.employees.controllers",[]),angular.module("pbApp.employees.directives",[]),angular.module("pbApp.employees.services",["ngResource"]);
!function(){"use strict";function e(e,n,s,t,o,i,l){function r(e){var t=n.defer();return s.query({search:e,limit:10,offset:0},function(e,n){t.resolve(e.results)}),t.promise}function c(){return f.companies||o.query(function(e){f.companies=e})}function u(){return f.centers&&f.centers.results.length&&f.centers.results[0].company==f.selectedCompany?void 0:i.query({company:f.selectedCompany},function(e){f.centers=e})}function a(){return f.divisions&&f.divisions.results.length&&f.divisions.results[0].center==f.selectedCenter?void 0:l.query({center:f.selectedCenter},function(e){f.divisions=e})}function m(){f.selectedCenter=null,f.selectedDivision=null,f.employees=new t({company:f.selectedCompany}),f.employees.nextPage()}function p(){f.selectedDivision=null,f.employees=new t({center:f.selectedCenter}),f.employees.nextPage()}function d(){f.employees=new t({division:f.selectedDivision}),f.employees.nextPage()}function y(e){return e.surname+" "+e.firstname+" "+e.patronymic}var f=this;f.employees=new t,f.companies=null,f.centers=null,f.divisions=null,f.selectedCompany=null,f.selectedCenter=null,f.selectedDivision=null,f.querySearch=r,f.getEmployeeName=y,f.loadCompanies=c,f.loadCenters=u,f.loadDivisions=a,f.companyChanged=m,f.centerChanged=p,f.divisionChanged=d}angular.module("pbApp.employees.controllers").controller("EmployeesListCtrl",["$scope","$q","Employee","EmployeeScroll","Company","Center","Division",e])}();
!function(){"use strict";function t(t){return t("api/employees/:id",{},{query:{method:"GET",isArray:!1}})}function s(t){var s=function(t){this.results=[],this.after=void 0,this.params=angular.copy(t)||{},this.params.limit=20,this.params.offset=0,this.busy=!1};return s.prototype.nextPage=function(){this.busy||null!==this.after&&(this.busy=!0,t.query(this.params,function(t){this.results=this.results.concat(t.results),this.params.offset+=this.params.limit,this.after=t.next,this.busy=!1}.bind(this)))},s}angular.module("pbApp.employees.services").factory("Employee",["$resource",t]).factory("EmployeeScroll",["Employee",s])}();
!function(){function e(){return{restrict:"AE",templateUrl:"employees/templates/employee-detail.html",scope:{employee:"=employee"}}}angular.module("pbApp.employees.directives").directive("employeeDetail",e)}();
!function(){"use strict";function e(){return{restrict:"AE",templateUrl:"employees/directives/templates/employees-list-item.html",scope:{employee:"=employee"}}}angular.module("pbApp.employees.directives").directive("employeesListItem",e)}();
angular.module("pbApp.companies",["pbApp.companies.services"]),angular.module("pbApp.companies.services",["ngResource"]);
!function(){"use strict";function r(r){return r("api/companies/:id",{},{query:{method:"GET",isArray:!1}})}function e(r){return r("api/centers/:id",{},{query:{method:"GET",isArray:!1}})}function i(r){return r("api/divisions/:id",{},{query:{method:"GET",isArray:!1}})}angular.module("pbApp.companies.services").factory("Company",["$resource",r]).factory("Center",["$resource",e]).factory("Division",["$resource",i])}();