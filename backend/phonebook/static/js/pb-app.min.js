!function(){"use strict";angular.module("pbApp",["ngRoute","ngResource","ngMaterial","infinite-scroll","pbApp.routes","pbApp.employees","pbApp.companies"]),angular.module("pbApp.routes",[])}();

!function(){"use strict";angular.module("pbApp.routes").config(["$routeProvider",function(e){e.when("/employees",{templateUrl:"/static/partials/employees/employees-list.html",controller:"EmployeesListCtrl",controllerAs:"ctrl"}).otherwise({redirectTo:"/employees"})}])}();
!function(){"use strict";function e(){return function(e){function c(e){return 4==e.length?e.slice(0,2)+"-"+e.slice(2):7==e.length?e.slice(0,3)+"-"+e.slice(3,5)+"-"+e.slice(5,7):e}if(!e)return"";var r,i,t,s=e.toString().replace(/[()-\s]+/g,"");switch(s.length){case 4:case 7:return c(s);case 10:r="",i=s.slice(0,3),t=c(s.slice(3));break;case 11:r=s[0],i=s.slice(1,4),t=c(s.slice(4));break;case 12:r=s.slice(0,2),i=s.slice(2,5),t=c(s.slice(5));break;default:return e}return(r+" ("+i+") "+t).trim()}}angular.module("pbApp").filter("formatPhone",e)}();
!function(){"use strict";angular.module("pbApp.employees",["pbApp.employees.controllers","pbApp.employees.services","pbApp.employees.directives"]),angular.module("pbApp.employees.controllers",[]),angular.module("pbApp.employees.directives",[]),angular.module("pbApp.employees.services",["ngResource"])}();
!function(){"use strict";function e(e,n,s,l,t,o,i){function c(e,n){originatorEv=n,e(n)}function r(e){var l=4;if(!e)return v.employees.results.slice(0,l);var t=n.defer();return s.query({search:e,limit:l,offset:0},function(e,n){t.resolve(e.results)}),t.promise}function u(e){v.selectedCompany=null,v.selectedCenter=null,v.selectedDivision=null,v.employees=new l({search:e}),v.employees.nextPage()}function a(){return v.companies||t.query(function(e){v.companies=e})}function m(){return v.centers&&v.centers.results.length&&v.centers.results[0].company==v.selectedCompany?void 0:o.query({company:v.selectedCompany},function(e){v.centers=e})}function p(){return v.divisions&&v.divisions.results.length&&v.divisions.results[0].center==v.selectedCenter?void 0:i.query({center:v.selectedCenter},function(e){v.divisions=e})}function d(){v.selectedCenter=null,v.selectedDivision=null,v.employees=new l({company:v.selectedCompany,search:v.searchText||null}),v.employees.nextPage()}function y(){v.selectedDivision=null,v.employees=new l({company:v.selectedCompany,center:v.selectedCenter,search:v.searchText||null}),v.employees.nextPage()}function C(){v.employees=new l({company:v.selectedCompany,center:v.selectedCenter,division:v.selectedDivision,search:v.searchText||null}),v.employees.nextPage()}function f(e){return e.surname+" "+e.firstname+" "+e.patronymic}var v=this;v.employees=new l,v.companies=null,v.centers=null,v.divisions=null,v.selectedCompany=null,v.selectedCenter=null,v.selectedDivision=null,v.employeeSearch=r,v.getEmployeeName=f,v.loadCompanies=a,v.loadCenters=m,v.loadDivisions=p,v.search=u,v.companyChanged=d,v.centerChanged=y,v.divisionChanged=C,v.openMenu=c}angular.module("pbApp.employees.controllers").controller("EmployeesListCtrl",["$scope","$q","Employee","EmployeeScroll","Company","Center","Division",e])}();
!function(){"use strict";function t(t){return t("api/employees/employee/:id",{},{query:{method:"GET",isArray:!1}})}function s(t){var s=function(t){this.results=[],this.after=void 0,this.params=angular.copy(t)||{},this.busy=!1};return s.prototype.nextPage=function(){this.busy||null!==this.after&&(this.busy=!0,t.query(this.params,function(t){this.results=this.results.concat(t.results),this.params.offset+=this.params.limit,this.after=t.next,this.busy=!1}.bind(this)))},s}angular.module("pbApp.employees.services").factory("Employee",["$resource",t]).factory("EmployeeScroll",["Employee",s])}();
!function(){"use strict";function e(){return{restrict:"AE",templateUrl:"employees/templates/employee-detail.html",scope:{employee:"=employee"}}}angular.module("pbApp.employees.directives").directive("employeeDetail",e)}();
!function(){"use strict";function e(){return{restrict:"AE",templateUrl:"employees/directives/templates/employees-list-item.html",scope:{employee:"=employee"}}}angular.module("pbApp.employees.directives").directive("employeesListItem",e)}();
!function(){"use strict";angular.module("pbApp.companies",["pbApp.companies.services"]),angular.module("pbApp.companies.services",["ngResource"])}();
!function(){"use strict";function r(r){return r("api/companies/company/:id",{},{query:{method:"GET",isArray:!1}})}function e(r){return r("api/companies/center/:id",{},{query:{method:"GET",isArray:!1}})}function i(r){return r("api/companies/division/:id",{},{query:{method:"GET",isArray:!1}})}angular.module("pbApp.companies.services").factory("Company",["$resource",r]).factory("Center",["$resource",e]).factory("Division",["$resource",i])}();